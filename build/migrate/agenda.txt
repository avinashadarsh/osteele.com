* Next
- publish
- plugins: related posts, nicer archive

publish:
  ruby -e 'load check.rb; to_com'
  mysqldump -uroot oswordpress | gzip > oswordpress.sql.gz
  ruby -e 'load check.rb; to_dev'
  scp owsordpress.sql.gz dh:.
  dh
    mysql -h mysql.osteele.com -u osteelewp -posteelewp oswordpress
      drop database oswordpress;
      create database oswordpress;
      grant all on oswordpress.* to osteelewp@localhost identified by 'osteelewp';
    gunzip < oswordpress.sql.gz | mysql -h mysql.osteele.com -u osteelewp -posteelewp oswordpress
    mkdir osteele.com.drupal
    cp -r osteele.com/.htaccess osteele.com/museum osteele.com.drupal
- push files to server
  rsync -avz --delete .htaccess museum wp dh:osteele.com
- test
- turbo

* later
- commit
- better archive (or separate page?)
- copy these scripts to site/build
- restore thumbnails?
- choose another theme?
- diff .htaccess
- remove drupal files?
- turn categories into tags

publish migration script:
- commit
- only add user if doesn't already exist
- push to github

* notes
** development
>>  %w[wordpress drupal migrate].each { |f| load "#{f}.rb" }; migrate

my.cnf:
[mysqldump]
max_allowed_packet = 500M

** Migration steps
*** reload drupal database
 gunzip < 2008-0915-0045_backup.sql.gz | mysql -uroot osdrupal
*** reset wordpress database
  mysqldump -uroot oswordpress wp_options > options.sql
  mysqldump -uroot oswordpress wp_users > users.sql
  mysql -uroot
    drop database oswordpress;
    create database oswordpress;
    grant all on oswordpress.* to osteelewp@localhost identified by 'osteelewp';
- open http://osteele.dev/admin mYzxIQaSwr$b
  mysql -uroot oswordpress < options.sql
  mysql -uroot oswordpress < users.sql
*** migrate
  load 'migrate.rb'; migrate(:verbose=>true, :delete_posts=>true)
  load 'post_migration.rb'; repair
- update the page ids: 251,253,254,255,256,257,258,259,260
- test against the import


** static pages
figure out what to do about museum pages
- make them 'posts' in 'museum' category
- download 'advanced permalinks'
[or, fix the static html pages]

** options:
-- blog url
-- /archives/%year%/%monthnum%/%postname%
-- add widgets
-- activate textile
-- switch themes
