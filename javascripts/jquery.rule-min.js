/**
 * jQuery.Rule - Css Rules manipulation, the jQuery way.
 * Copyright (c) 2007 Ariel Flesler - aflesler(at)gmail(dot)com
 * Licensed under GPL license (http://www.opensource.org/licenses/gpl-license.php).
 * Date: 11/23/2007
 * Compatible with jQuery 1.2, tested on Firefox 2.0.0.9, and IE 6, both on Windows.
 * @author Ariel Flesler
 * @version 0.9.2
 **/
(function($){var d=$('<style rel="alternate stylesheet" type="text/css">').appendTo('head')[0],sheet=d.sheet?'sheet':'styleSheet',storage=d[sheet],rules=storage.rules?'rules':'cssRules',remove=storage.deleteRule?'deleteRule':'removeRule',owner=storage.ownerNode?'ownerNode':'owningElement',reRule=/^([^{]+)\{([^}]*)\}.*/m,reStyle=/([^:]+):([^;}]+)/;storage.disabled=true;$.rule=function(r,c){if(!(this instanceof $.rule))return new $.rule(r,c);this.sheets=$.rule.sheets(c);if(r&&reRule.test(r))r=$.rule.clean(r);if(typeof r=='object'&&!r.exec)return this.setArray(r.get?r.get():r.splice?r:[r]);this.setArray(this.sheets.cssRules().get());return r?this.filter(r):this};$.extend($.rule,{sheets:function(c){var o=c;if(typeof o!='object')o=$.makeArray(document.styleSheets);o=$(o);if(typeof c=='string')o=o.ownerNode().filter(c).sheet();return o.not(storage)},rule:function(a){if(a.selectorText)return['',a.selectorText,a.style.cssText];return reRule.exec(a)},appendTo:function(r,a,b){switch(typeof a){case'string':a=this.sheets(a);case'object':if(a[0])a=a[0];if(a[sheet])a=a[sheet];if(a[rules])break;default:if(typeof r=='object')return r;a=storage}var p;if(!b&&(p=this.parent(r)))r=this.remove(r,p);var c=this.rule(r);if(a.addRule)a.addRule(c[1],c[2]||'x:y');else if(a.insertRule)a.insertRule(c[1]+'{'+c[2]+'}',a[rules].length);return a[rules][a[rules].length-1]},remove:function(r,p){p=p||this.parent(r);if(p!=storage){var i=p?$.inArray(r,p[rules]):-1;if(i!=-1){r=this.appendTo(r,storage,true);p[remove](i)}}return r},clean:function(r){return $.map(r.split(/\s*,\s*/),function(a){return $.rule.appendTo(a,storage)})},parent:function(r){if(typeof r=='string'||!$.browser.msie)return r.parentStyleSheet;var a;this.sheets().each(function(){if($.inArray(r,this[rules])!=-1){a=this;return false}});return a},outerText:function(a){return!a?'':[a.selectorText+'{','\t'+a.style.cssText,'}'].join('\n').toLowerCase()},text:function(a,b){if(b!==undefined)a.style.cssText=b;return!a?'':a.style.cssText.toLowerCase()}});$.rule.fn=$.rule.prototype={pushStack:function(a,b){var c=$.rule(a,b||this.sheets);c.prevObject=this;return c},end:function(){return this.prevObject||$.rule(null,[])},filter:function(s){var a;if(!s)s='true';else if(s.split||s.exec){a=s.exec?s:new RegExp('(?:^|,)\\s*(?:'+s.replace(/,/gi,'|')+')\\s*(?:,|$)','i');s=function(r){return a.test(r.selectorText)}}return this.pushStack($.grep(this,s))},add:function(a,c){return this.pushStack($.merge(this.get(),$.rule(a,c)))},is:function(s){return!!(s&&this.filter(s).length)},not:function(n,c){n=$.rule(n,c);return this.filter(function(){return $.inArray(this,n)==-1})},append:function(s){var a=this,rule;$.each(s.split(/\s*;\s*/),function(i,v){if((rule=reStyle.exec(v)))a.css(rule[1],rule[2])});return this},text:function(a){return!arguments.length?$.rule.text(this[0]):this.each(function(){$.rule.text(this,a)})},outerText:function(){return $.rule.outerText(this[0])}};$.each({ownerNode:owner,sheet:sheet,cssRules:rules},function(m,a){var b=a==rules;$.fn[m]=function(){return this.map(function(){return b?$.makeArray(this[a]):this[a]})}});$.fn.cssText=function(){return this.filter('link,style').eq(0).sheet().cssRules().map(function(){return $.rule.outerText(this)}).get().join('\n')};$.each('remove,appendTo,parent'.split(','),function(k,f){$.rule.fn[f]=function(){var a=$.makeArray(arguments),that=this;a.unshift(null);return this.each(function(i){a[0]=this;that[i]=$.rule[f].apply($.rule,a)||that[i]})}});$.each(('each,index,setArray,get,size,not,eq,slice,map,attr,andSelf,css,queue,dequeue,stop,animate').split(','),function(k,f){$.rule.fn[f]=$.fn[f]});var g=$.curCSS;$.curCSS=function(e,a,f){return e.selectorText?e.style[a]:g.call($,e,a,f)}})(jQuery);