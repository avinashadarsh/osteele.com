<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>html2db</title><meta content="DocBook XSL Stylesheets V1.65.1" name="generator"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="N10001"></a>html2db</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Oliver</span> <span class="surname">Steele</span></h3></div></div></div><div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#N10015">Usage</a></span></dt><dt><span class="section"><a href="#N10031">Basic Features</a></span></dt><dt><span class="section"><a href="#N10043">Translations</a></span></dt><dt><span class="section"><a href="#N100F5">XSLT Parameters</a></span></dt><dt><span class="section"><a href="#N1010C">Processing instructions</a></span></dt><dt><span class="section"><a href="#N1014B">Limitations</a></span></dt><dt><span class="section"><a href="#N10160">Bugs</a></span></dt><dt><span class="section"><a href="#N1016C">Wishlist</a></span></dt><dt><span class="section"><a href="#N1017B">Credits</a></span></dt></dl></div><p>html2db is an XSLT stylesheet that transforms an XHTML source
document into a Docbook file.</p><p>This is a work in progress.  It serves my needs, but doesn't
attempt to be more general than that.</p><p></p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N10015"></a>Usage</h2></div></div><div></div></div><div class="orderedlist"><ol type="1" compact="compact"><li><p>Download html2db from <a href="http://osteele.com/sources/html2db.zip" target="_top">http://osteele.com/sources/html2db.zip</a>.</p></li><li><p>Uncompress it into your directory.</p></li><li><p>Download and install Java (the JRE or JDK) if you don't have it already.</p></li><li><p>Download xalan, if you don't have it already, and add it to your CLASSPATH.</p></li><li><p>Use xalan to process an XHTML source file into a Docbook file:
<pre class="programlisting">java org.apache.xalan.xslt.Process -XSL html2dbk.xsl -IN doc.html &gt; doc.xml</pre>

</p></li></ol></div><p></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N10031"></a>Basic Features</h2></div></div><div></div></div><div class="itemizedlist"><ul type="disc" compact="compact"><li><p>Turns h1, h2 structure into nested sections.</p></li><li><p>Turns images into mediaobjects</p></li><li><p>Translates lists, tables, and links</p></li><li><p>Turns dfn into indexentry and glossterm</p></li></ul></div><p></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N10043"></a>Translations</h2></div></div><div></div></div><p>
<tt class="literal">code/i</tt> stands for "an <tt class="literal">i</tt> element immediately within a <tt class="literal">code</tt> element".  The notation is from XPath.</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>XHTML</th><th>Docbook</th><th>Notes</th></tr></thead><tbody><tr><td><tt class="literal">b</tt>, <tt class="literal">i</tt>, <tt class="literal">em</tt>, <tt class="literal">strong</tt></td><td><tt class="literal">emphasis</tt></td><td>The <tt class="literal">role</tt> attribute is the original tag name</td></tr><tr><td><tt class="literal">dfn</tt></td><td><tt class="literal">glossitem</tt>, and also <tt class="literal">primary</tt><tt class="literal">indexterm</tt></td><td class="auto-generated">&nbsp;</td></tr><tr><td><tt class="literal">code/i</tt>, <tt class="literal">tt/i</tt>, <tt class="literal">pre/i</tt></td><td><tt class="literal">replaceable</tt></td><td>in practice, <tt class="literal">i</tt> within a monospace content is usually used to mean this</td></tr><tr><td><tt class="literal">pre</tt>, <tt class="literal">body/code</tt></td><td><tt class="literal">programlisting</tt></td><td class="auto-generated">&nbsp;</td></tr><tr><td><tt class="literal">img</tt></td><td><tt class="literal">[informal]figure/mediaobject/imageobject/imagedata</tt></td><td>If it has a <tt class="literal">title</tt> attribute or <tt class="literal">db:title</tt> it's wrapped in a <tt class="literal">figure</tt>.  Otherwise it's wrapped in an <tt class="literal">informalfigure</tt>.  Note that this is wrong for inline images.</td></tr><tr><td><tt class="literal">table</tt></td><td><tt class="literal">[informal]table</tt></td><td>XHTML <tt class="literal">table</tt> becomes Docbook <tt class="literal">table</tt> if it has a <tt class="literal">summary</tt> attribute; <tt class="literal">informaltable</tt> otherwise.</td></tr><tr><td><tt class="literal">&lt;a name="<i class="replaceable"><tt>name</tt></i>"&gt;</tt></td><td><tt class="literal">&lt;anchor id="{$anchor-id-prefix}<i class="replaceable"><tt>name</tt></i>"&gt;</tt></td><td>Anchors within hn are attached as ids to the section instead.</td></tr><tr><td><tt class="literal">&lt;a href="#<i class="replaceable"><tt>name</tt></i>"&gt;</tt></td><td><tt class="literal">&lt;link linkend="{$anchor-id-prefix}<i class="replaceable"><tt>name</tt></i>"&gt;</tt></td><td class="auto-generated">&nbsp;</td></tr><tr><td><tt class="literal">&lt;a href="<i class="replaceable"><tt>url</tt></i>"&gt;</tt></td><td><tt class="literal">&lt;ulink url="<i class="replaceable"><tt>name</tt></i>"&gt;</tt></td><td class="auto-generated">&nbsp;</td></tr><tr><td>ul</td><td>itemizedlist</td><td>But see the processing instruction below.</td></tr></tbody></table></div><p></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N100F5"></a>XSLT Parameters</h2></div></div><div></div></div><div class="variablelist"><dl><dt><span class="term">
<tt class="literal">&lt;xsl:param name="anchor-id-prefix" select="''/&gt;</tt>
</span></dt><dd><p>Prefixed to every id generated from &lt;a name=&gt; and &lt;a href="#"&gt;.  This is useful to avoid collisions between multiple documents that are compiled into the same book.</p></dd><dt><span class="term">
<tt class="literal">&lt;xsl:param name="document-root" select="'article'"/&gt;</tt>
</span></dt><dd><p>Default document root; can be overridden by &lt;?html2db class=&gt;.</p></dd></dl></div><p></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1010C"></a>Processing instructions</h2></div></div><div></div></div><p>Use the <tt class="literal">&lt;?html2db?&gt;</tt> processing instruction to customize the transoformation of the XHTML source to Docbook:</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Processing instruction</th><th>Content</th><th>Effect</th></tr></thead><tbody><tr><td><tt class="literal">&lt;?html2db class="<i class="replaceable"><tt>xxx</tt></i>"?&gt;</tt></td><td><tt class="literal">body</tt></td><td>Sets the output document root to <i class="replaceable"><tt>xxx</tt></i>.  Useful for
translating to <tt class="literal">prefix</tt>, <tt class="literal">appendix</tt>, or <tt class="literal">chapter</tt>; the default is
<i class="replaceable"><tt>$document-root</tt></i>.</td></tr><tr><td><tt class="literal">&lt;?html2db class="simplelist"?&gt;</tt></td><td>ul</td><td>Creates a vertical <tt class="literal">simplelist</tt>.  (Note that the current implementation simply checks for the presence of <span class="em">any</span> html2db processing instruction.)</td></tr></tbody></table></div><p></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1014B"></a>Limitations</h2></div></div><div></div></div><div class="itemizedlist"><ul type="disc" compact="compact"><li><p>Requires xalan;</p></li><li><p>only very simplest table format is implemented</p></li><li><p>always uses compact lists</p></li><li><p>much behavior is hardwired</p></li><li><p>more general attribute parsing for class-pi</p></li></ul></div><p></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N10160"></a>Bugs</h2></div></div><div></div></div><div class="itemizedlist"><ul type="disc" compact="compact"><li><p>img should only wrap in mediaobject if it's at block level</p></li><li><p>processor should track whether it's in a block content, instead of using the "wrap" kludge</p></li></ul></div><p></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1016C"></a>Wishlist</h2></div></div><div></div></div><div class="itemizedlist"><ul type="disc" compact="compact"><li><p>Parse dc metadata from html header</p></li><li><p>Option to use html/head/title instead of html/body/h1[1] for top title</p></li><li><p>Allow an id on every element (var, etc.)</p></li></ul></div><p></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1017B"></a>Credits</h2></div></div><div></div></div><p>html2db was written by <a href="http://osteele.com" target="_top">Oliver Steele</a>, as part of the <a href="http://laszlosystems.com" target="_top">Laszlo Systems, Inc.</a> documentation effort.</p><p></p></div></div></body></html>