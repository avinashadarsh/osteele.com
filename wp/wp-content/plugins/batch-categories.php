<code><font color="#000000">
<font color="#0000BB">&lt;?php<br /><br /></font><font color="#FF8000">//&nbsp;Batch&nbsp;Categories&nbsp;Admin&nbsp;Screen&nbsp;0.91&nbsp;(24.07.04:&nbsp;just&nbsp;cleaned&nbsp;the&nbsp;category&nbsp;selection&nbsp;dropdown)<br /><br />//&nbsp;12.07.04&nbsp;Stephanie&nbsp;Booth&nbsp;aka&nbsp;bunnywabbit_&nbsp;on&nbsp;#wordpress&nbsp;--&nbsp;http://climbtothestars.org/&nbsp;for&nbsp;questions&nbsp;or&nbsp;fixes<br /><br />//&nbsp;http://climbtothestars.org/archives/2004/07/13/batch-categories-09/<br /><br />//&nbsp;for&nbsp;debugging<br />//&nbsp;print_r($_POST);<br /><br /></font><font color="#007700">require_once(</font><font color="#DD0000">'../wp-includes/wp-l10n.php'</font><font color="#007700">);<br /><br /></font><font color="#0000BB">$title&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">__</font><font color="#007700">(</font><font color="#DD0000">'Batch&nbsp;Categories'</font><font color="#007700">);<br /></font><font color="#0000BB">$parent_file&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">'edit.php'</font><font color="#007700">;<br />require_once(</font><font color="#DD0000">'admin-header.php'</font><font color="#007700">);<br />if&nbsp;(empty(</font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'mode'</font><font color="#007700">]))&nbsp;</font><font color="#0000BB">$mode&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">'view'</font><font color="#007700">;<br />else&nbsp;</font><font color="#0000BB">$mode&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'mode'</font><font color="#007700">];<br /><br /></font><font color="#FF8000">//&nbsp;if&nbsp;we've&nbsp;POSTed,&nbsp;deal&nbsp;with&nbsp;it<br /><br /></font><font color="#007700">if(isset(</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#DD0000">'submit'</font><font color="#007700">])&amp;&amp;(</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#DD0000">'submit'</font><font color="#007700">]==</font><font color="#DD0000">"Update"</font><font color="#007700">))<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$update_categories</font><font color="#007700">=</font><font color="#0000BB">true</font><font color="#007700">;<br />}<br /><br /><br />if(isset(</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#DD0000">'submit'</font><font color="#007700">])&amp;&amp;</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#DD0000">'add'</font><font color="#007700">]!=</font><font color="#0000BB">0</font><font color="#007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#DD0000">'submit'</font><font color="#007700">]==</font><font color="#DD0000">"Add&nbsp;to&nbsp;Category"</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$add_category</font><font color="#007700">=</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;elseif(</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#DD0000">'submit'</font><font color="#007700">]==</font><font color="#DD0000">"Remove&nbsp;from&nbsp;Category"</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$remove_category</font><font color="#007700">=</font><font color="#0000BB">true</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$batch_operation</font><font color="#007700">=</font><font color="#0000BB">true</font><font color="#007700">;<br />}<br /><br />if(</font><font color="#0000BB">$batch_operation</font><font color="#007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;this&nbsp;will&nbsp;bother&nbsp;us&nbsp;later&nbsp;if&nbsp;we&nbsp;leave&nbsp;it&nbsp;in<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">unset(</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#DD0000">'submit'</font><font color="#007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;keep&nbsp;those&nbsp;sneaky&nbsp;lower&nbsp;level&nbsp;users&nbsp;at&nbsp;bay<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">if&nbsp;(</font><font color="#0000BB">$user_level&nbsp;</font><font color="#007700">==&nbsp;</font><font color="#0000BB">0</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die&nbsp;(</font><font color="#0000BB">__</font><font color="#007700">(</font><font color="#DD0000">'Cheatin&amp;#8217;&nbsp;uh?'</font><font color="#007700">));<br /><br /></font><font color="#FF8000">//&nbsp;this&nbsp;is&nbsp;the&nbsp;category&nbsp;we&nbsp;want&nbsp;to&nbsp;add/remove<br /><br /></font><font color="#0000BB">$the_cat</font><font color="#007700">=</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#DD0000">'add'</font><font color="#007700">];<br />unset(</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#DD0000">'add'</font><font color="#007700">]);<br /><br /></font><font color="#FF8000">//&nbsp;list&nbsp;the&nbsp;posts&nbsp;we&nbsp;are&nbsp;dealing&nbsp;with,&nbsp;from&nbsp;the&nbsp;hidden&nbsp;field<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">foreach(</font><font color="#0000BB">$_POST&nbsp;</font><font color="#007700">as&nbsp;</font><font color="#0000BB">$key&nbsp;</font><font color="#007700">=&gt;&nbsp;</font><font color="#0000BB">$value</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$split</font><font color="#007700">=</font><font color="#0000BB">explode</font><font color="#007700">(</font><font color="#DD0000">"_"</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$key</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$post_ID</font><font color="#007700">=</font><font color="#0000BB">$split</font><font color="#007700">[</font><font color="#DD0000">"1"</font><font color="#007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$new_categories</font><font color="#007700">[</font><font color="#0000BB">$post_ID</font><font color="#007700">][]=</font><font color="#0000BB">$value</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$post_list</font><font color="#007700">[]=</font><font color="#0000BB">$post_ID</font><font color="#007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br /></font><font color="#FF8000">//&nbsp;now&nbsp;go&nbsp;through&nbsp;all&nbsp;the&nbsp;posts&nbsp;and&nbsp;add/remove&nbsp;that&nbsp;category&nbsp;when&nbsp;necessary<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">foreach(</font><font color="#0000BB">$post_list&nbsp;</font><font color="#007700">as&nbsp;</font><font color="#0000BB">$post_ID</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;First&nbsp;get&nbsp;the&nbsp;old&nbsp;categories<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$old_categories&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">$wpdb</font><font color="#007700">-&gt;</font><font color="#0000BB">get_col</font><font color="#007700">(</font><font color="#DD0000">"SELECT&nbsp;category_id&nbsp;FROM&nbsp;$tablepost2cat&nbsp;WHERE&nbsp;post_id&nbsp;=&nbsp;$post_ID"</font><font color="#007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$add_category</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;then,&nbsp;if&nbsp;the&nbsp;new&nbsp;category&nbsp;is&nbsp;not&nbsp;yet&nbsp;in&nbsp;the&nbsp;list&nbsp;of&nbsp;old&nbsp;categories,&nbsp;add&nbsp;it<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">if&nbsp;(!</font><font color="#0000BB">in_array</font><font color="#007700">(</font><font color="#0000BB">$the_cat</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$old_categories</font><font color="#007700">))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;new&nbsp;categories:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$wpdb</font><font color="#007700">-&gt;</font><font color="#0000BB">query</font><font color="#007700">(</font><font color="#DD0000">"INSERT&nbsp;INTO&nbsp;$tablepost2cat&nbsp;(post_id,&nbsp;category_id)&nbsp;VALUES&nbsp;($post_ID,&nbsp;$the_cat)"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$message</font><font color="#007700">.=</font><font color="#DD0000">"Added&nbsp;category&nbsp;$the_cat&nbsp;to&nbsp;&lt;a&nbsp;href=\"/wp-admin/post.php?action=edit&amp;amp;post=$post_ID\"&nbsp;title=\"Edit&nbsp;this&nbsp;post.\"&gt;post&nbsp;$post_ID&lt;/a&gt;.&lt;br&nbsp;/&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$message</font><font color="#007700">.=</font><font color="#DD0000">"&lt;a&nbsp;href=\"/wp-admin/post.php?action=edit&amp;amp;post=$post_ID\"&nbsp;title=\"Edit&nbsp;this&nbsp;post.\"&gt;Post&nbsp;$post_ID&lt;/a&gt;&nbsp;was&nbsp;already&nbsp;in&nbsp;category&nbsp;$the_cat,&nbsp;no&nbsp;need&nbsp;to&nbsp;add&nbsp;it!&lt;br&nbsp;/&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</font><font color="#FF8000">//&nbsp;end&nbsp;if&nbsp;in_array<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">}&nbsp;</font><font color="#FF8000">//&nbsp;end&nbsp;if&nbsp;add&nbsp;category<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">elseif(</font><font color="#0000BB">$remove_category</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;if&nbsp;the&nbsp;category&nbsp;to&nbsp;remove&nbsp;is&nbsp;in&nbsp;the&nbsp;list&nbsp;of&nbsp;old_categories,&nbsp;remove&nbsp;it<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">if&nbsp;(</font><font color="#0000BB">in_array</font><font color="#007700">(</font><font color="#0000BB">$the_cat</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$old_categories</font><font color="#007700">))&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$wpdb</font><font color="#007700">-&gt;</font><font color="#0000BB">query</font><font color="#007700">(</font><font color="#DD0000">"DELETE&nbsp;FROM&nbsp;$tablepost2cat&nbsp;WHERE&nbsp;category_id&nbsp;=&nbsp;$the_cat&nbsp;AND&nbsp;post_id&nbsp;=&nbsp;$post_ID&nbsp;LIMIT&nbsp;1"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$message</font><font color="#007700">.=</font><font color="#DD0000">"Removed&nbsp;category&nbsp;$the_cat&nbsp;from&nbsp;&lt;a&nbsp;href=\"/wp-admin/post.php?action=edit&amp;amp;post=$post_ID\"&nbsp;title=\"Edit&nbsp;this&nbsp;post.\"&gt;post&nbsp;$post_ID&lt;/a&gt;.&lt;br&nbsp;/&gt;\n"</font><font color="#007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$message</font><font color="#007700">.=</font><font color="#DD0000">"&lt;a&nbsp;href=\"/wp-admin/post.php?action=edit&amp;amp;post=$post_ID\"&nbsp;title=\"Edit&nbsp;this&nbsp;post.\"&gt;Post&nbsp;$post_ID&lt;/a&gt;&nbsp;was&nbsp;not&nbsp;filed&nbsp;under&nbsp;category&nbsp;$the_cat,&nbsp;so&nbsp;no&nbsp;need&nbsp;to&nbsp;remove&nbsp;it!&lt;br&nbsp;/&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;end&nbsp;if&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">}&nbsp;</font><font color="#FF8000">//&nbsp;end&nbsp;if&nbsp;remove&nbsp;category<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">}&nbsp;</font><font color="#FF8000">//&nbsp;end&nbsp;foreach&nbsp;post_list<br />&nbsp;&nbsp;&nbsp;&nbsp;<br /></font><font color="#007700">}&nbsp;</font><font color="#FF8000">//&nbsp;end&nbsp;&nbsp;if&nbsp;batch&nbsp;operation<br /><br /><br /></font><font color="#007700">if(</font><font color="#0000BB">$update_categories</font><font color="#007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;this&nbsp;will&nbsp;bother&nbsp;us&nbsp;later&nbsp;if&nbsp;we&nbsp;leave&nbsp;it&nbsp;in<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">unset(</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#DD0000">'submit'</font><font color="#007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;keep&nbsp;those&nbsp;sneaky&nbsp;lower&nbsp;level&nbsp;users&nbsp;at&nbsp;bay<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">if&nbsp;(</font><font color="#0000BB">$user_level&nbsp;</font><font color="#007700">==&nbsp;</font><font color="#0000BB">0</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die&nbsp;(</font><font color="#0000BB">__</font><font color="#007700">(</font><font color="#DD0000">'Cheatin&amp;#8217;&nbsp;uh?'</font><font color="#007700">));<br /><br /></font><font color="#FF8000">//&nbsp;break&nbsp;up&nbsp;the&nbsp;results&nbsp;of&nbsp;the&nbsp;drop-down&nbsp;lists;&nbsp;keep&nbsp;on&nbsp;one&nbsp;side&nbsp;the&nbsp;posts&nbsp;we're&nbsp;dealing&nbsp;with,&nbsp;and&nbsp;the&nbsp;categories&nbsp;that&nbsp;have&nbsp;been&nbsp;selected&nbsp;for&nbsp;them<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">foreach(</font><font color="#0000BB">$_POST&nbsp;</font><font color="#007700">as&nbsp;</font><font color="#0000BB">$key&nbsp;</font><font color="#007700">=&gt;&nbsp;</font><font color="#0000BB">$value</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$split</font><font color="#007700">=</font><font color="#0000BB">explode</font><font color="#007700">(</font><font color="#DD0000">"_"</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$key</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$post_ID</font><font color="#007700">=</font><font color="#0000BB">$split</font><font color="#007700">[</font><font color="#DD0000">"0"</font><font color="#007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$new_categories</font><font color="#007700">[</font><font color="#0000BB">$post_ID</font><font color="#007700">][]=</font><font color="#0000BB">$value</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font><font color="#0000BB">$post_ID</font><font color="#007700">!=</font><font color="#0000BB">$previous_ID</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$post_list</font><font color="#007700">[]=</font><font color="#0000BB">$post_ID</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$previous_ID</font><font color="#007700">=</font><font color="#0000BB">$post_ID</font><font color="#007700">;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;<br /></font><font color="#FF8000">//&nbsp;go&nbsp;through&nbsp;the&nbsp;post&nbsp;list&nbsp;and&nbsp;add/remove&nbsp;categories&nbsp;as&nbsp;necessary&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">foreach(</font><font color="#0000BB">$post_list&nbsp;</font><font color="#007700">as&nbsp;</font><font color="#0000BB">$post_ID</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$post_categories</font><font color="#007700">=</font><font color="#0000BB">array_unique</font><font color="#007700">(</font><font color="#0000BB">$new_categories</font><font color="#007700">[</font><font color="#0000BB">$post_ID</font><font color="#007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;remove&nbsp;the&nbsp;entries&nbsp;for&nbsp;the&nbsp;"None"&nbsp;option&nbsp;in&nbsp;the&nbsp;drop-down&nbsp;list<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">foreach(</font><font color="#0000BB">$post_categories&nbsp;</font><font color="#007700">as&nbsp;</font><font color="#0000BB">$key&nbsp;</font><font color="#007700">=&gt;&nbsp;</font><font color="#0000BB">$a_cat</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if((</font><font color="#0000BB">$a_cat</font><font color="#007700">)==</font><font color="#0000BB">0</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unset(</font><font color="#0000BB">$post_categories</font><font color="#007700">[</font><font color="#0000BB">$key</font><font color="#007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;Now&nbsp;it's&nbsp;category&nbsp;time!&nbsp;Code&nbsp;taken&nbsp;without&nbsp;too&nbsp;many&nbsp;modifications&nbsp;from&nbsp;post.php<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;First&nbsp;the&nbsp;old&nbsp;categories<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$old_categories&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">$wpdb</font><font color="#007700">-&gt;</font><font color="#0000BB">get_col</font><font color="#007700">(</font><font color="#DD0000">"SELECT&nbsp;category_id&nbsp;FROM&nbsp;$tablepost2cat&nbsp;WHERE&nbsp;post_id&nbsp;=&nbsp;$post_ID"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;Delete&nbsp;any?<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">foreach&nbsp;(</font><font color="#0000BB">$old_categories&nbsp;</font><font color="#007700">as&nbsp;</font><font color="#0000BB">$old_cat</font><font color="#007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</font><font color="#0000BB">in_array</font><font color="#007700">(</font><font color="#0000BB">$old_cat</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$post_categories</font><font color="#007700">))&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$wpdb</font><font color="#007700">-&gt;</font><font color="#0000BB">query</font><font color="#007700">(</font><font color="#DD0000">"DELETE&nbsp;FROM&nbsp;$tablepost2cat&nbsp;WHERE&nbsp;category_id&nbsp;=&nbsp;$old_cat&nbsp;AND&nbsp;post_id&nbsp;=&nbsp;$post_ID&nbsp;LIMIT&nbsp;1"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$message</font><font color="#007700">.=</font><font color="#DD0000">"Removed&nbsp;category&nbsp;$old_cat&nbsp;from&nbsp;&lt;a&nbsp;href=\"/wp-admin/post.php?action=edit&amp;amp;post=$post_ID\"&nbsp;title=\"Edit&nbsp;this&nbsp;post.\"&gt;post&nbsp;$post_ID&lt;/a&gt;.&lt;br&nbsp;/&gt;\n"</font><font color="#007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</font><font color="#FF8000">//&nbsp;end&nbsp;if<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">}&nbsp;</font><font color="#FF8000">//&nbsp;end&nbsp;foreach<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Add&nbsp;any?<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">foreach&nbsp;(</font><font color="#0000BB">$post_categories&nbsp;</font><font color="#007700">as&nbsp;</font><font color="#0000BB">$new_cat</font><font color="#007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</font><font color="#0000BB">in_array</font><font color="#007700">(</font><font color="#0000BB">$new_cat</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$old_categories</font><font color="#007700">))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;new&nbsp;categories:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$wpdb</font><font color="#007700">-&gt;</font><font color="#0000BB">query</font><font color="#007700">(</font><font color="#DD0000">"INSERT&nbsp;INTO&nbsp;$tablepost2cat&nbsp;(post_id,&nbsp;category_id)&nbsp;VALUES&nbsp;($post_ID,&nbsp;$new_cat)"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$message</font><font color="#007700">.=</font><font color="#DD0000">"Added&nbsp;category&nbsp;$new_cat&nbsp;to&nbsp;&lt;a&nbsp;href=\"/wp-admin/post.php?action=edit&amp;amp;post=$post_ID\"&nbsp;title=\"Edit&nbsp;this&nbsp;post.\"&gt;post&nbsp;$post_ID&lt;/a&gt;.&lt;br&nbsp;/&gt;\n"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</font><font color="#FF8000">//&nbsp;end&nbsp;if<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">}&nbsp;</font><font color="#FF8000">//&nbsp;end&nbsp;foreach<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">}&nbsp;&nbsp;<br />}<br /><br /><br /></font><font color="#FF8000">//&nbsp;a&nbsp;&nbsp;nicer&nbsp;dropdown_cats&nbsp;function&nbsp;based&nbsp;on&nbsp;wp_dropdown_cats&nbsp;(small&nbsp;modif)<br /><br /></font><font color="#007700">function&nbsp;</font><font color="#0000BB">nice_dropdown_cats</font><font color="#007700">(</font><font color="#0000BB">$currentcat&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">0</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$parent&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">0</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$level&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">0</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$categories&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">0</font><font color="#007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;</font><font color="#0000BB">$wpdb</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$tablecategories</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</font><font color="#0000BB">$categories</font><font color="#007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$categories&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">$wpdb</font><font color="#007700">-&gt;</font><font color="#0000BB">get_results</font><font color="#007700">(</font><font color="#DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;$tablecategories&nbsp;ORDER&nbsp;BY&nbsp;cat_name"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</font><font color="#0000BB">$categories</font><font color="#007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</font><font color="#0000BB">$categories&nbsp;</font><font color="#007700">as&nbsp;</font><font color="#0000BB">$category</font><font color="#007700">)&nbsp;{&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</font><font color="#0000BB">$parent&nbsp;</font><font color="#007700">==&nbsp;</font><font color="#0000BB">$category</font><font color="#007700">-&gt;</font><font color="#0000BB">category_parent</font><font color="#007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$pad&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">str_repeat</font><font color="#007700">(</font><font color="#DD0000">'&amp;#8211;&nbsp;'</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$level</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#DD0000">"\n\t&lt;option&nbsp;value=\"$category-&gt;cat_ID\""</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</font><font color="#0000BB">$currentcat&nbsp;</font><font color="#007700">==&nbsp;</font><font color="#0000BB">$category</font><font color="#007700">-&gt;</font><font color="#0000BB">cat_ID</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#DD0000">"&nbsp;selected=\"selected\""</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#DD0000">"&gt;$pad$category-&gt;cat_name&lt;/option&gt;"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">nice_dropdown_cats</font><font color="#007700">(</font><font color="#0000BB">$currentcat</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$category</font><font color="#007700">-&gt;</font><font color="#0000BB">cat_ID</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$level&nbsp;</font><font color="#007700">+&nbsp;</font><font color="#0000BB">1</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$categories</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</font><font color="#0000BB">false</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></font><font color="#FF8000">//&nbsp;a&nbsp;function&nbsp;we&nbsp;will&nbsp;need&nbsp;--&nbsp;generates&nbsp;category&nbsp;dropdowns&nbsp;per&nbsp;post<br />//&nbsp;could&nbsp;make&nbsp;this&nbsp;way&nbsp;better&nbsp;by&nbsp;caching&nbsp;the&nbsp;drop-down&nbsp;list&nbsp;in&nbsp;a&nbsp;table,&nbsp;and&nbsp;looping&nbsp;through&nbsp;the&nbsp;table&nbsp;to&nbsp;"select"&nbsp;the&nbsp;appropriate&nbsp;category,&nbsp;instead&nbsp;of&nbsp;hitting&nbsp;the&nbsp;poor&nbsp;database&nbsp;with&nbsp;dozens&nbsp;of&nbsp;queries.<br /></font><font color="#007700">function&nbsp;</font><font color="#0000BB">cat_dropdowns</font><font color="#007700">(</font><font color="#0000BB">$limit</font><font color="#007700">=</font><font color="#DD0000">'4'</font><font color="#007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;initialize&nbsp;counter<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$counter</font><font color="#007700">=</font><font color="#0000BB">0</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;grab&nbsp;categories&nbsp;for&nbsp;current&nbsp;post<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$post_categories</font><font color="#007700">=</font><font color="#0000BB">get_the_category</font><font color="#007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;output&nbsp;a&nbsp;dropdown&nbsp;for&nbsp;each&nbsp;category,&nbsp;respecting&nbsp;the&nbsp;max&nbsp;number&nbsp;of&nbsp;dropdowns<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">foreach(</font><font color="#0000BB">$post_categories&nbsp;</font><font color="#007700">as&nbsp;</font><font color="#0000BB">$category</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">?&gt;<br /></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;name='<font color="#0000BB">&lt;?php&nbsp;the_id</font><font color="#007700">();&nbsp;print(</font><font color="#DD0000">"_$counter"</font><font color="#007700">);&nbsp;</font><font color="#0000BB">?&gt;</font>'&nbsp;class='postform'&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000BB">&lt;?php&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;a&nbsp;dropdown&nbsp;list&nbsp;of&nbsp;categories,&nbsp;indented,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;option&nbsp;value="0"&nbsp;selected="selected"&gt;None&lt;/option&gt;&nbsp;<font color="#0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;DEBUG&nbsp;print("Dropdown&nbsp;for&nbsp;$category-&gt;category_id\n");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">nice_dropdown_cats</font><font color="#007700">(</font><font color="#0000BB">$category</font><font color="#007700">-&gt;</font><font color="#0000BB">category_id</font><font color="#007700">);&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">?&gt;<br /></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;increment&nbsp;the&nbsp;counter&nbsp;--&nbsp;the&nbsp;counter&nbsp;is&nbsp;there&nbsp;so&nbsp;we&nbsp;can&nbsp;"fill&nbsp;up"&nbsp;the&nbsp;number&nbsp;of&nbsp;drop-downs&nbsp;for&nbsp;each&nbsp;post&nbsp;until&nbsp;we&nbsp;reach&nbsp;the&nbsp;setting&nbsp;$limit,&nbsp;if&nbsp;the&nbsp;post&nbsp;has&nbsp;less&nbsp;categories&nbsp;than&nbsp;the&nbsp;allowed&nbsp;limit.&nbsp;If&nbsp;the&nbsp;post&nbsp;has&nbsp;more&nbsp;categories&nbsp;than&nbsp;the&nbsp;limit,&nbsp;we&nbsp;show&nbsp;the&nbsp;drop-downs&nbsp;anyway,&nbsp;because&nbsp;otherwise&nbsp;the&nbsp;extra&nbsp;categories&nbsp;would&nbsp;get&nbsp;chopped&nbsp;off!<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$counter</font><font color="#007700">++;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</font><font color="#FF8000">//&nbsp;end&nbsp;foreach&nbsp;$post_categories<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;if&nbsp;we&nbsp;stop&nbsp;counting&nbsp;categories&nbsp;before&nbsp;we&nbsp;reach&nbsp;the&nbsp;limit,&nbsp;we'll&nbsp;keep&nbsp;on&nbsp;padding&nbsp;with&nbsp;de-selected&nbsp;dropdown&nbsp;boxes&nbsp;to&nbsp;allow&nbsp;easy&nbsp;addition&nbsp;of&nbsp;categories<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">while(</font><font color="#0000BB">$counter</font><font color="#007700">&lt;</font><font color="#0000BB">$limit</font><font color="#007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">?&gt;<br /></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;name='<font color="#0000BB">&lt;?php&nbsp;the_id</font><font color="#007700">();&nbsp;print(</font><font color="#DD0000">"_$counter"</font><font color="#007700">);&nbsp;</font><font color="#0000BB">?&gt;</font>'&nbsp;class='postform'&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;option&nbsp;value="0"&nbsp;selected="selected"&gt;None&lt;/option&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000BB">&lt;?php&nbsp;</font><font color="#FF8000">//&nbsp;a&nbsp;dropdown&nbsp;list&nbsp;of&nbsp;categories,&nbsp;no&nbsp;option&nbsp;for&nbsp;'All',&nbsp;sorted&nbsp;by&nbsp;name,&nbsp;an&nbsp;option&nbsp;for&nbsp;"None",&nbsp;select&nbsp;none.&nbsp;</font><font color="#0000BB">?&gt;<br /></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000BB">&lt;?php&nbsp;&nbsp;nice_dropdown_cats</font><font color="#007700">();&nbsp;&nbsp;</font><font color="#0000BB">?&gt;<br /></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$counter</font><font color="#007700">++;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</font><font color="#FF8000">//&nbsp;end&nbsp;while&nbsp;$counter&nbsp;(second)<br /><br /></font><font color="#007700">}&nbsp;</font><font color="#FF8000">//&nbsp;end&nbsp;function&nbsp;cat_dropdowns()<br /><br /></font><font color="#0000BB">?&gt;<br /></font>&lt;ul&nbsp;id="adminmenu2"&gt;&nbsp;<br />&nbsp;&nbsp;&lt;li&gt;&lt;a&nbsp;href="edit.php"&gt;<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Posts'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;/a&gt;&lt;/li&gt;&nbsp;<br />&nbsp;&nbsp;&lt;li&gt;&lt;a&nbsp;href="edit-comments.php"&gt;<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Comments'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;/a&gt;&lt;/li&gt;&nbsp;<br />&nbsp;&nbsp;&lt;li&gt;&lt;a&nbsp;href="moderation.php"&gt;<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Awaiting&nbsp;Moderation'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;/a&gt;&lt;/li&gt;&nbsp;<br />&nbsp;&nbsp;&lt;li&nbsp;class="last"&gt;&lt;a&nbsp;href="batch-categories.php"&nbsp;class="current"&gt;<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Batch&nbsp;Categories'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;/a&gt;&lt;/li&gt;&nbsp;<br />&lt;/ul&gt;&nbsp;<br /><font color="#0000BB">&lt;?php<br />get_currentuserinfo</font><font color="#007700">();<br /></font><font color="#0000BB">?&gt;</font>&nbsp;<br />&lt;div&nbsp;class="wrap"&gt;&nbsp;<br /><font color="#0000BB">&lt;?php<br /></font><font color="#007700">if(&nbsp;isset(&nbsp;</font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'cat'</font><font color="#007700">]&nbsp;)&nbsp;)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</font><font color="#DD0000">'&lt;h2&gt;'&nbsp;</font><font color="#007700">.&nbsp;</font><font color="#0000BB">$category</font><font color="#007700">[</font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'cat'</font><font color="#007700">]].</font><font color="#DD0000">"&lt;/h2&gt;"</font><font color="#007700">;<br />}<br /><br /><br /></font><font color="#FF8000">//&nbsp;this&nbsp;form&nbsp;allows&nbsp;to&nbsp;view&nbsp;all&nbsp;posts&nbsp;from&nbsp;a&nbsp;given&nbsp;category<br /></font><font color="#0000BB">?&gt;<br /></font>&lt;form&nbsp;name="viewcat"&nbsp;action=""&nbsp;method="get"&nbsp;style="float:&nbsp;left;&nbsp;width:&nbsp;32em;"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;fieldset&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;legend&gt;<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Show&nbsp;Posts&nbsp;From&nbsp;Category...'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;/legend&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;name='cat'&nbsp;class='postform'&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">if(&nbsp;!isset(&nbsp;</font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'cat'</font><font color="#007700">]&nbsp;)&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'cat'</font><font color="#007700">]=</font><font color="#DD0000">"0"</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">?&gt;<br /></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;option&nbsp;value="0"<font color="#0000BB">&lt;?php&nbsp;</font><font color="#007700">if(</font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'cat'</font><font color="#007700">]==</font><font color="#DD0000">"0"</font><font color="#007700">){print(</font><font color="#DD0000">'selected="selected"'</font><font color="#007700">);}&nbsp;</font><font color="#0000BB">?&gt;</font>&gt;Any&nbsp;category&lt;/option&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nice_dropdown_cats</font><font color="#007700">(</font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'cat'</font><font color="#007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">?&gt;<br /></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type="submit"&nbsp;name="submit"&nbsp;value="<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Show&nbsp;Category'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>"&nbsp;&nbsp;/&gt;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/fieldset&gt;<br />&lt;/form&gt;<br /><br /><font color="#0000BB">&lt;?php<br /></font><font color="#FF8000">//&nbsp;this&nbsp;form&nbsp;allows&nbsp;display&nbsp;of&nbsp;posts&nbsp;meeting&nbsp;search&nbsp;criteria<br /></font><font color="#0000BB">?&gt;<br /></font><br />&lt;form&nbsp;name="searchform"&nbsp;action=""&nbsp;method="get"&nbsp;style="float:&nbsp;left;&nbsp;width:&nbsp;20em;&nbsp;margin-left:&nbsp;3em;"&gt;&nbsp;<br />&nbsp;&nbsp;&lt;fieldset&gt;&nbsp;<br />&nbsp;&nbsp;&lt;legend&gt;<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Show&nbsp;Posts&nbsp;That&nbsp;Contain...'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;/legend&gt;&nbsp;<br />&nbsp;&nbsp;&lt;input&nbsp;type="text"&nbsp;name="s"&nbsp;value="<font color="#0000BB">&lt;?php&nbsp;</font><font color="#007700">if&nbsp;(isset(</font><font color="#0000BB">$s</font><font color="#007700">))&nbsp;echo&nbsp;</font><font color="#0000BB">$s</font><font color="#007700">;&nbsp;</font><font color="#0000BB">?&gt;</font>"&nbsp;size="17"&nbsp;/&gt;&nbsp;<br />&nbsp;&nbsp;&lt;input&nbsp;type="submit"&nbsp;name="submit"&nbsp;value="<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Search'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>"&nbsp;&nbsp;/&gt;&nbsp;<br />&nbsp;&nbsp;&lt;/fieldset&gt;<br />&lt;/form&gt;<br /><br />&lt;br&nbsp;style="clear:both;"&nbsp;/&gt;<br /><br /><font color="#0000BB">&lt;?php<br /><br /></font><font color="#007700">if(</font><font color="#0000BB">$message</font><font color="#007700">!=</font><font color="#DD0000">""</font><font color="#007700">)<br />{<br />print(</font><font color="#DD0000">"&lt;p&gt;$message&lt;/p&gt;"</font><font color="#007700">);<br />}<br /><br /></font><font color="#FF8000">//&nbsp;by&nbsp;default,&nbsp;show&nbsp;only&nbsp;10&nbsp;posts<br /></font><font color="#007700">if(empty(</font><font color="#0000BB">$cat</font><font color="#007700">)&amp;&amp;empty(</font><font color="#0000BB">$s</font><font color="#007700">))<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;if(empty(</font><font color="#0000BB">$num</font><font color="#007700">))<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$showposts</font><font color="#007700">=</font><font color="#0000BB">10</font><font color="#007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;show&nbsp;explanation&nbsp;and&nbsp;warning<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">?&gt;<br /></font>&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;This&nbsp;screen&nbsp;is&nbsp;powerful&nbsp;but&nbsp;greedy&nbsp;in&nbsp;resources.&nbsp;(It&nbsp;shows&nbsp;you&nbsp;only&nbsp;the&nbsp;last&nbsp;10&nbsp;posts&nbsp;by&nbsp;default.&nbsp;Select&nbsp;posts&nbsp;by&nbsp;category&nbsp;or&nbsp;using&nbsp;a&nbsp;search&nbsp;string.&nbsp;Passing&nbsp;a&nbsp;"lim=n"&nbsp;parameter&nbsp;to&nbsp;the&nbsp;url&nbsp;will&nbsp;control&nbsp;the&nbsp;number&nbsp;of&nbsp;category&nbsp;drop-downs&nbsp;you&nbsp;get&nbsp;for&nbsp;each&nbsp;post.&nbsp;A&nbsp;"num=n"&nbsp;parameter&nbsp;will&nbsp;limit&nbsp;the&nbsp;number&nbsp;of&nbsp;posts&nbsp;(useful&nbsp;if&nbsp;you're&nbsp;being&nbsp;a&nbsp;bit&nbsp;cautious&nbsp;in&nbsp;trying&nbsp;it&nbsp;out).&nbsp;You&nbsp;can&nbsp;also&nbsp;remove&nbsp;the&nbsp;excerpts&nbsp;if&nbsp;they&nbsp;bother&nbsp;you&nbsp;by&nbsp;specifying&nbsp;"excerpt=0".&nbsp;The&nbsp;Update&nbsp;buttons&nbsp;are&nbsp;all&nbsp;identical:&nbsp;they&nbsp;update&nbsp;all&nbsp;the&nbsp;displayed&nbsp;posts.&lt;/p&gt;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;You&nbsp;can&nbsp;easily&nbsp;move&nbsp;a&nbsp;bunch&nbsp;of&nbsp;posts&nbsp;to&nbsp;one&nbsp;category&nbsp;with&nbsp;the&nbsp;"Add&nbsp;to&nbsp;Category"&nbsp;button,&nbsp;and&nbsp;similarly&nbsp;remove&nbsp;a&nbsp;category&nbsp;with&nbsp;"Remove&nbsp;from&nbsp;Category".&lt;/p&gt;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Maybe&nbsp;you&nbsp;will&nbsp;want&nbsp;to&nbsp;backup&nbsp;your&nbsp;wp_post2cat&nbsp;table&nbsp;before&nbsp;you&nbsp;play&nbsp;with&nbsp;this.&nbsp;It&nbsp;works&nbsp;for&nbsp;me,&nbsp;but&nbsp;has&nbsp;not&nbsp;been&nbsp;thoroughly&nbsp;tested,&nbsp;and&nbsp;comes&nbsp;with&nbsp;no&nbsp;guarantee.&nbsp;&lt;a&nbsp;href="/archives/2004/07/13/batch-categories-09/"&nbsp;title="Batch&nbsp;Categories&nbsp;0.9&nbsp;notes."&gt;More&nbsp;information&nbsp;on&nbsp;my&nbsp;weblog&lt;/a&gt;.&nbsp;Have&nbsp;fun!&lt;/p&gt;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Comments&nbsp;and&nbsp;feedback&nbsp;to&nbsp;bunnywabbit_&nbsp;on&nbsp;IRC&nbsp;freenode&nbsp;#wordpress.&lt;/p&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">}<br />&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//&nbsp;num&nbsp;allows&nbsp;control&nbsp;on&nbsp;the&nbsp;number&nbsp;of&nbsp;posts&nbsp;displayed&nbsp;(the&nbsp;"num"&nbsp;last&nbsp;posts)&nbsp;--&nbsp;useful&nbsp;for&nbsp;debugging&nbsp;without&nbsp;messing&nbsp;up&nbsp;the&nbsp;10&nbsp;last&nbsp;posts<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$showposts</font><font color="#007700">=</font><font color="#0000BB">$num</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br />include(</font><font color="#0000BB">ABSPATH</font><font color="#007700">.</font><font color="#DD0000">'wp-blog-header.php'</font><font color="#007700">);<br /><br />if&nbsp;(</font><font color="#0000BB">$posts</font><font color="#007700">)&nbsp;{<br /><br /><br /></font><font color="#FF8000">//&nbsp;this&nbsp;form&nbsp;allows&nbsp;the&nbsp;user&nbsp;to&nbsp;add&nbsp;all&nbsp;the&nbsp;posts&nbsp;displayed&nbsp;on&nbsp;the&nbsp;page&nbsp;to&nbsp;the&nbsp;category&nbsp;he&nbsp;wishes<br /></font><font color="#0000BB">?&gt;<br /></font><br />&lt;form&nbsp;name="addcat"&nbsp;action="<font color="#0000BB">&lt;?php&nbsp;</font><font color="#007700">print(</font><font color="#DD0000">"$PHP_SELF?$QUERY_STRING"</font><font color="#007700">);&nbsp;</font><font color="#0000BB">?&gt;</font>"&nbsp;method="post"&nbsp;style="width:&nbsp;32em;"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;fieldset&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;legend&gt;<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Batch&nbsp;Add/Remove&nbsp;Displayed&nbsp;Posts...'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;/legend&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;name='add'&nbsp;class='postform'&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;option&nbsp;value="0"&nbsp;selected="selected"&gt;None&lt;/option&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nice_dropdown_cats</font><font color="#007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">?&gt;<br /></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;<br /><br /><font color="#0000BB">&lt;?php<br /></font><font color="#FF8000">//&nbsp;list&nbsp;affected&nbsp;posts<br /></font><font color="#007700">foreach&nbsp;(</font><font color="#0000BB">$posts&nbsp;</font><font color="#007700">as&nbsp;</font><font color="#0000BB">$post</font><font color="#007700">)&nbsp;{&nbsp;</font><font color="#0000BB">start_wp</font><font color="#007700">();<br /></font><font color="#0000BB">?&gt;<br /></font>&lt;input&nbsp;type="hidden"&nbsp;name="<font color="#0000BB">&lt;?php&nbsp;</font><font color="#007700">echo(</font><font color="#DD0000">"post_$id"</font><font color="#007700">);&nbsp;</font><font color="#0000BB">?&gt;</font>"&nbsp;value="listed"&nbsp;/&gt;<br /><font color="#0000BB">&lt;?php<br /></font><font color="#007700">}<br /></font><font color="#0000BB">?&gt;<br /></font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type="submit"&nbsp;name="submit"&nbsp;value="<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Add&nbsp;to&nbsp;Category'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>"&nbsp;&nbsp;/&gt;&lt;br&nbsp;/&gt;<br />&lt;input&nbsp;type="submit"&nbsp;name="submit"&nbsp;value="<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Remove&nbsp;from&nbsp;Category'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>"&nbsp;&nbsp;/&gt;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/fieldset&gt;<br />&lt;/form&gt;<br /><br /><font color="#0000BB">&lt;?php<br /></font><font color="#FF8000">//&nbsp;this&nbsp;is&nbsp;the&nbsp;main&nbsp;form<br /></font><font color="#0000BB">?&gt;<br /></font><br />&lt;form&nbsp;name="batchcats"&nbsp;action="<font color="#0000BB">&lt;?php&nbsp;</font><font color="#007700">print(</font><font color="#DD0000">"$PHP_SELF?$QUERY_STRING"</font><font color="#007700">);&nbsp;</font><font color="#0000BB">?&gt;</font>"&nbsp;method="post"&gt;<br /><br /><br />&lt;table&nbsp;width="100%"&nbsp;cellpadding="3"&nbsp;cellspacing="3"&gt;&nbsp;<br />&nbsp;&nbsp;&lt;tr&gt;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;th&nbsp;scope="col"&gt;<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Info'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;/th&gt;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;th&nbsp;scope="col"&gt;<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Title'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;/th&gt;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;th&nbsp;scope="col"&gt;<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Categories'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;/th&gt;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;th&nbsp;scope="col"&gt;<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Edit'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;/th&gt;&nbsp;<br />&nbsp;&nbsp;&lt;/tr&gt;&nbsp;<br /><font color="#0000BB">&lt;?php<br />$bgcolor&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">''</font><font color="#007700">;<br />foreach&nbsp;(</font><font color="#0000BB">$posts&nbsp;</font><font color="#007700">as&nbsp;</font><font color="#0000BB">$post</font><font color="#007700">)&nbsp;{&nbsp;</font><font color="#0000BB">start_wp</font><font color="#007700">();<br /></font><font color="#0000BB">$bgcolor&nbsp;</font><font color="#007700">=&nbsp;(</font><font color="#DD0000">'#eee'&nbsp;</font><font color="#007700">==&nbsp;</font><font color="#0000BB">$bgcolor</font><font color="#007700">)&nbsp;?&nbsp;</font><font color="#DD0000">'none'&nbsp;</font><font color="#007700">:&nbsp;</font><font color="#DD0000">'#eee'</font><font color="#007700">;<br /></font><font color="#0000BB">?&gt;</font>&nbsp;<br />&nbsp;&nbsp;&lt;tr&nbsp;style='background-color:&nbsp;<font color="#0000BB">&lt;?php&nbsp;</font><font color="#007700">echo&nbsp;</font><font color="#0000BB">$bgcolor</font><font color="#007700">;&nbsp;</font><font color="#0000BB">?&gt;</font>'&gt;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;<font color="#0000BB">&lt;?php&nbsp;the_time</font><font color="#007700">(</font><font color="#DD0000">'Y-m-d&nbsp;\&lt;\b\r&nbsp;\/\&gt;&nbsp;g:i:s&nbsp;a'</font><font color="#007700">);&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;br&nbsp;/&gt;<font color="#0000BB">&lt;?php&nbsp;</font><font color="#007700">echo&nbsp;(</font><font color="#DD0000">"ID:&nbsp;$id"</font><font color="#007700">);&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;/td&gt;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;&lt;a&nbsp;href="<font color="#0000BB">&lt;?php&nbsp;the_permalink</font><font color="#007700">();&nbsp;</font><font color="#0000BB">?&gt;</font>"&nbsp;rel="permalink"&gt;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000BB">&lt;?php&nbsp;the_title</font><font color="#007700">()&nbsp;</font><font color="#0000BB">?&gt;</font>&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/a&gt;&lt;br&nbsp;/&gt;<font color="#0000BB">&lt;?php&nbsp;</font><font color="#007700">if(</font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'excerpt'</font><font color="#007700">]!=</font><font color="#DD0000">"0"</font><font color="#007700">){</font><font color="#0000BB">the_excerpt</font><font color="#007700">();}&nbsp;</font><font color="#0000BB">?&gt;<br /></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000BB">&lt;?php&nbsp;</font><font color="#007700">if&nbsp;(</font><font color="#DD0000">'private'&nbsp;</font><font color="#007700">==&nbsp;</font><font color="#0000BB">$post</font><font color="#007700">-&gt;</font><font color="#0000BB">post_status</font><font color="#007700">)&nbsp;</font><font color="#0000BB">_e</font><font color="#007700">(</font><font color="#DD0000">'&nbsp;-&nbsp;&lt;strong&gt;Private&lt;/strong&gt;'</font><font color="#007700">);&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;/td&gt;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000BB">&lt;?php&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">if(isset(</font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'lim'</font><font color="#007700">]))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">cat_dropdowns</font><font color="#007700">(</font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'lim'</font><font color="#007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">cat_dropdowns</font><font color="#007700">();&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">?&gt;<br /></font>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type="submit"&nbsp;name="submit"&nbsp;value="<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'Update'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>"&nbsp;&nbsp;/&gt;&lt;br&nbsp;/&gt;<br /><font color="#0000BB">&lt;?php&nbsp;</font><font color="#007700">if&nbsp;((</font><font color="#0000BB">$user_level&nbsp;</font><font color="#007700">&gt;&nbsp;</font><font color="#0000BB">$authordata</font><font color="#007700">-&gt;</font><font color="#0000BB">user_level</font><font color="#007700">)&nbsp;or&nbsp;(</font><font color="#0000BB">$user_login&nbsp;</font><font color="#007700">==&nbsp;</font><font color="#0000BB">$authordata</font><font color="#007700">-&gt;</font><font color="#0000BB">user_login</font><font color="#007700">))&nbsp;{&nbsp;echo&nbsp;</font><font color="#DD0000">"&lt;a&nbsp;href='post.php?action=edit&amp;amp;post=$id'&nbsp;class='edit'&gt;"&nbsp;</font><font color="#007700">.&nbsp;</font><font color="#0000BB">__</font><font color="#007700">(</font><font color="#DD0000">'Edit'</font><font color="#007700">)&nbsp;.&nbsp;</font><font color="#DD0000">"&lt;/a&gt;"</font><font color="#007700">;&nbsp;}&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;/td&gt;&nbsp;<br />&nbsp;&nbsp;&lt;/tr&gt;&nbsp;<br /><font color="#0000BB">&lt;?php<br /></font><font color="#007700">}<br />}&nbsp;else&nbsp;{<br /></font><font color="#0000BB">?&gt;<br /></font>&nbsp;&nbsp;&lt;tr&nbsp;style='background-color:&nbsp;<font color="#0000BB">&lt;?php&nbsp;</font><font color="#007700">echo&nbsp;</font><font color="#0000BB">$bgcolor</font><font color="#007700">;&nbsp;</font><font color="#0000BB">?&gt;</font>'&gt;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&nbsp;colspan="8"&gt;<font color="#0000BB">&lt;?php&nbsp;_e</font><font color="#007700">(</font><font color="#DD0000">'No&nbsp;posts&nbsp;found.'</font><font color="#007700">)&nbsp;</font><font color="#0000BB">?&gt;</font>&lt;/td&gt;&nbsp;<br />&nbsp;&nbsp;&lt;/tr&gt;&nbsp;<br /><font color="#0000BB">&lt;?php<br /></font><font color="#007700">}&nbsp;</font><font color="#FF8000">//&nbsp;end&nbsp;if&nbsp;($posts)<br /></font><font color="#0000BB">?&gt;</font>&nbsp;<br />&lt;/table&gt;&nbsp;<br /><br />&lt;/form&gt;<br />&lt;/div&gt;&nbsp;<br /><font color="#0000BB">&lt;?php&nbsp;<br />&nbsp;</font><font color="#007700">include(</font><font color="#DD0000">'admin-footer.php'</font><font color="#007700">);<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code>